import{c as N,a as X,b as le,d as A,t as _,i as k,m as ce,e as M,f as B,g as W,h as w,S as D,j as U,u as ee,F as H,s as K,k as ue,l as fe}from"./index-Cbhuv5Nz.js";function he(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var L={exports:{}};/*!***************************************************
* mark.js v8.11.1
* https://markjs.io/
* Copyright (c) 2014–2018, Julian Kühnel
* Released under the MIT license https://git.io/vwTVl
*****************************************************/var de=L.exports,G;function pe(){return G||(G=1,function(o,u){(function(c,h){o.exports=h()})(de,function(){var c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(d){return typeof d}:function(d){return d&&typeof Symbol=="function"&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d},h=function(d,l){if(!(d instanceof l))throw new TypeError("Cannot call a class as a function")},g=function(){function d(l,e){for(var r=0;r<e.length;r++){var t=e[r];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(l,t.key,t)}}return function(l,e,r){return e&&d(l.prototype,e),r&&d(l,r),l}}(),E=Object.assign||function(d){for(var l=1;l<arguments.length;l++){var e=arguments[l];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(d[r]=e[r])}return d},m=function(){function d(l){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],t=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5e3;h(this,d),this.ctx=l,this.iframes=e,this.exclude=r,this.iframesTimeout=t}return g(d,[{key:"getContexts",value:function(){var e=void 0,r=[];return typeof this.ctx>"u"||!this.ctx?e=[]:NodeList.prototype.isPrototypeOf(this.ctx)?e=Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?e=this.ctx:typeof this.ctx=="string"?e=Array.prototype.slice.call(document.querySelectorAll(this.ctx)):e=[this.ctx],e.forEach(function(t){var n=r.filter(function(a){return a.contains(t)}).length>0;r.indexOf(t)===-1&&!n&&r.push(t)}),r}},{key:"getIframeContents",value:function(e,r){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},n=void 0;try{var a=e.contentWindow;if(n=a.document,!a||!n)throw new Error("iframe inaccessible")}catch{t()}n&&r(n)}},{key:"isIframeBlank",value:function(e){var r="about:blank",t=e.getAttribute("src").trim(),n=e.contentWindow.location.href;return n===r&&t!==r&&t}},{key:"observeIframeLoad",value:function(e,r,t){var n=this,a=!1,s=null,i=function f(){if(!a){a=!0,clearTimeout(s);try{n.isIframeBlank(e)||(e.removeEventListener("load",f),n.getIframeContents(e,r,t))}catch{t()}}};e.addEventListener("load",i),s=setTimeout(i,this.iframesTimeout)}},{key:"onIframeReady",value:function(e,r,t){try{e.contentWindow.document.readyState==="complete"?this.isIframeBlank(e)?this.observeIframeLoad(e,r,t):this.getIframeContents(e,r,t):this.observeIframeLoad(e,r,t)}catch{t()}}},{key:"waitForIframes",value:function(e,r){var t=this,n=0;this.forEachIframe(e,function(){return!0},function(a){n++,t.waitForIframes(a.querySelector("html"),function(){--n||r()})},function(a){a||r()})}},{key:"forEachIframe",value:function(e,r,t){var n=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},s=e.querySelectorAll("iframe"),i=s.length,f=0;s=Array.prototype.slice.call(s);var p=function(){--i<=0&&a(f)};i||p(),s.forEach(function(v){d.matches(v,n.exclude)?p():n.onIframeReady(v,function(x){r(v)&&(f++,t(x)),p()},p)})}},{key:"createIterator",value:function(e,r,t){return document.createNodeIterator(e,r,t,!1)}},{key:"createInstanceOnIframe",value:function(e){return new d(e.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(e,r,t){var n=e.compareDocumentPosition(t),a=Node.DOCUMENT_POSITION_PRECEDING;if(n&a)if(r!==null){var s=r.compareDocumentPosition(t),i=Node.DOCUMENT_POSITION_FOLLOWING;if(s&i)return!0}else return!0;return!1}},{key:"getIteratorNode",value:function(e){var r=e.previousNode(),t=void 0;return r===null?t=e.nextNode():t=e.nextNode()&&e.nextNode(),{prevNode:r,node:t}}},{key:"checkIframeFilter",value:function(e,r,t,n){var a=!1,s=!1;return n.forEach(function(i,f){i.val===t&&(a=f,s=i.handled)}),this.compareNodeIframe(e,r,t)?(a===!1&&!s?n.push({val:t,handled:!0}):a!==!1&&!s&&(n[a].handled=!0),!0):(a===!1&&n.push({val:t,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(e,r,t,n){var a=this;e.forEach(function(s){s.handled||a.getIframeContents(s.val,function(i){a.createInstanceOnIframe(i).forEachNode(r,t,n)})})}},{key:"iterateThroughNodes",value:function(e,r,t,n,a){for(var s=this,i=this.createIterator(r,e,n),f=[],p=[],v=void 0,x=void 0,b=function(){var I=s.getIteratorNode(i);return x=I.prevNode,v=I.node,v};b();)this.iframes&&this.forEachIframe(r,function(S){return s.checkIframeFilter(v,x,S,f)},function(S){s.createInstanceOnIframe(S).forEachNode(e,function(I){return p.push(I)},n)}),p.push(v);p.forEach(function(S){t(S)}),this.iframes&&this.handleOpenIframes(f,e,t,n),a()}},{key:"forEachNode",value:function(e,r,t){var n=this,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:function(){},s=this.getContexts(),i=s.length;i||a(),s.forEach(function(f){var p=function(){n.iterateThroughNodes(e,f,r,t,function(){--i<=0&&a()})};n.iframes?n.waitForIframes(f,p):p()})}}],[{key:"matches",value:function(e,r){var t=typeof r=="string"?[r]:r,n=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;if(n){var a=!1;return t.every(function(s){return n.call(e,s)?(a=!0,!1):!0}),a}else return!1}}]),d}(),y=function(){function d(l){h(this,d),this.ctx=l,this.ie=!1;var e=window.navigator.userAgent;(e.indexOf("MSIE")>-1||e.indexOf("Trident")>-1)&&(this.ie=!0)}return g(d,[{key:"log",value:function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"debug",t=this.opt.log;this.opt.debug&&(typeof t>"u"?"undefined":c(t))==="object"&&typeof t[r]=="function"&&t[r]("mark.js: "+e)}},{key:"escapeStr",value:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(e){return this.opt.wildcards!=="disabled"&&(e=this.setupWildcardsRegExp(e)),e=this.escapeStr(e),Object.keys(this.opt.synonyms).length&&(e=this.createSynonymsRegExp(e)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),this.opt.diacritics&&(e=this.createDiacriticsRegExp(e)),e=this.createMergedBlanksRegExp(e),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.createJoinersRegExp(e)),this.opt.wildcards!=="disabled"&&(e=this.createWildcardsRegExp(e)),e=this.createAccuracyRegExp(e),e}},{key:"createSynonymsRegExp",value:function(e){var r=this.opt.synonyms,t=this.opt.caseSensitive?"":"i",n=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var a in r)if(r.hasOwnProperty(a)){var s=r[a],i=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(a):this.escapeStr(a),f=this.opt.wildcards!=="disabled"?this.setupWildcardsRegExp(s):this.escapeStr(s);i!==""&&f!==""&&(e=e.replace(new RegExp("("+this.escapeStr(i)+"|"+this.escapeStr(f)+")","gm"+t),n+("("+this.processSynomyms(i)+"|")+(this.processSynomyms(f)+")")+n))}return e}},{key:"processSynomyms",value:function(e){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),e}},{key:"setupWildcardsRegExp",value:function(e){return e=e.replace(/(?:\\)*\?/g,function(r){return r.charAt(0)==="\\"?"?":""}),e.replace(/(?:\\)*\*/g,function(r){return r.charAt(0)==="\\"?"*":""})}},{key:"createWildcardsRegExp",value:function(e){var r=this.opt.wildcards==="withSpaces";return e.replace(/\u0001/g,r?"[\\S\\s]?":"\\S?").replace(/\u0002/g,r?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(e){return e.replace(/[^(|)\\]/g,function(r,t,n){var a=n.charAt(t+1);return/[(|)\\]/.test(a)||a===""?r:r+"\0"})}},{key:"createJoinersRegExp",value:function(e){var r=[],t=this.opt.ignorePunctuation;return Array.isArray(t)&&t.length&&r.push(this.escapeStr(t.join(""))),this.opt.ignoreJoiners&&r.push("\\u00ad\\u200b\\u200c\\u200d"),r.length?e.split(/\u0000+/).join("["+r.join("")+"]*"):e}},{key:"createDiacriticsRegExp",value:function(e){var r=this.opt.caseSensitive?"":"i",t=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"],n=[];return e.split("").forEach(function(a){t.every(function(s){if(s.indexOf(a)!==-1){if(n.indexOf(s)>-1)return!1;e=e.replace(new RegExp("["+s+"]","gm"+r),"["+s+"]"),n.push(s)}return!0})}),e}},{key:"createMergedBlanksRegExp",value:function(e){return e.replace(/[\s]+/gmi,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(e){var r=this,t="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿",n=this.opt.accuracy,a=typeof n=="string"?n:n.value,s=typeof n=="string"?[]:n.limiters,i="";switch(s.forEach(function(f){i+="|"+r.escapeStr(f)}),a){case"partially":default:return"()("+e+")";case"complementary":return i="\\s"+(i||this.escapeStr(t)),"()([^"+i+"]*"+e+"[^"+i+"]*)";case"exactly":return"(^|\\s"+i+")("+e+")(?=$|\\s"+i+")"}}},{key:"getSeparatedKeywords",value:function(e){var r=this,t=[];return e.forEach(function(n){r.opt.separateWordSearch?n.split(" ").forEach(function(a){a.trim()&&t.indexOf(a)===-1&&t.push(a)}):n.trim()&&t.indexOf(n)===-1&&t.push(n)}),{keywords:t.sort(function(n,a){return a.length-n.length}),length:t.length}}},{key:"isNumeric",value:function(e){return Number(parseFloat(e))==e}},{key:"checkRanges",value:function(e){var r=this;if(!Array.isArray(e)||Object.prototype.toString.call(e[0])!=="[object Object]")return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(e),[];var t=[],n=0;return e.sort(function(a,s){return a.start-s.start}).forEach(function(a){var s=r.callNoMatchOnInvalidRanges(a,n),i=s.start,f=s.end,p=s.valid;p&&(a.start=i,a.length=f-i,t.push(a),n=f)}),t}},{key:"callNoMatchOnInvalidRanges",value:function(e,r){var t=void 0,n=void 0,a=!1;return e&&typeof e.start<"u"?(t=parseInt(e.start,10),n=t+parseInt(e.length,10),this.isNumeric(e.start)&&this.isNumeric(e.length)&&n-r>0&&n-t>0?a=!0:(this.log("Ignoring invalid or overlapping range: "+(""+JSON.stringify(e))),this.opt.noMatch(e))):(this.log("Ignoring invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:t,end:n,valid:a}}},{key:"checkWhitespaceRanges",value:function(e,r,t){var n=void 0,a=!0,s=t.length,i=r-s,f=parseInt(e.start,10)-i;return f=f>s?s:f,n=f+parseInt(e.length,10),n>s&&(n=s,this.log("End range automatically set to the max value of "+s)),f<0||n-f<0||f>s||n>s?(a=!1,this.log("Invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)):t.substring(f,n).replace(/\s+/g,"")===""&&(a=!1,this.log("Skipping whitespace only range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:f,end:n,valid:a}}},{key:"getTextNodes",value:function(e){var r=this,t="",n=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(a){n.push({start:t.length,end:(t+=a.textContent).length,node:a})},function(a){return r.matchesExclude(a.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){e({value:t,nodes:n})})}},{key:"matchesExclude",value:function(e){return m.matches(e,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(e,r,t){var n=this.opt.element?this.opt.element:"mark",a=e.splitText(r),s=a.splitText(t-r),i=document.createElement(n);return i.setAttribute("data-markjs","true"),this.opt.className&&i.setAttribute("class",this.opt.className),i.textContent=a.textContent,a.parentNode.replaceChild(i,a),s}},{key:"wrapRangeInMappedTextNode",value:function(e,r,t,n,a){var s=this;e.nodes.every(function(i,f){var p=e.nodes[f+1];if(typeof p>"u"||p.start>r){if(!n(i.node))return!1;var v=r-i.start,x=(t>i.end?i.end:t)-i.start,b=e.value.substr(0,i.start),S=e.value.substr(x+i.start);if(i.node=s.wrapRangeInTextNode(i.node,v,x),e.value=b+S,e.nodes.forEach(function(I,T){T>=f&&(e.nodes[T].start>0&&T!==f&&(e.nodes[T].start-=x),e.nodes[T].end-=x)}),t-=x,a(i.node.previousSibling,i.start),t>i.end)r=i.end;else return!1}return!0})}},{key:"wrapMatches",value:function(e,r,t,n,a){var s=this,i=r===0?0:r+1;this.getTextNodes(function(f){f.nodes.forEach(function(p){p=p.node;for(var v=void 0;(v=e.exec(p.textContent))!==null&&v[i]!=="";)if(t(v[i],p)){var x=v.index;if(i!==0)for(var b=1;b<i;b++)x+=v[b].length;p=s.wrapRangeInTextNode(p,x,x+v[i].length),n(p.previousSibling),e.lastIndex=0}}),a()})}},{key:"wrapMatchesAcrossElements",value:function(e,r,t,n,a){var s=this,i=r===0?0:r+1;this.getTextNodes(function(f){for(var p=void 0;(p=e.exec(f.value))!==null&&p[i]!=="";){var v=p.index;if(i!==0)for(var x=1;x<i;x++)v+=p[x].length;var b=v+p[i].length;s.wrapRangeInMappedTextNode(f,v,b,function(S){return t(p[i],S)},function(S,I){e.lastIndex=I,n(S)})}a()})}},{key:"wrapRangeFromIndex",value:function(e,r,t,n){var a=this;this.getTextNodes(function(s){var i=s.value.length;e.forEach(function(f,p){var v=a.checkWhitespaceRanges(f,i,s.value),x=v.start,b=v.end,S=v.valid;S&&a.wrapRangeInMappedTextNode(s,x,b,function(I){return r(I,f,s.value.substring(x,b),p)},function(I){t(I,f)})}),n()})}},{key:"unwrapMatches",value:function(e){for(var r=e.parentNode,t=document.createDocumentFragment();e.firstChild;)t.appendChild(e.removeChild(e.firstChild));r.replaceChild(t,e),this.ie?this.normalizeTextNode(r):r.normalize()}},{key:"normalizeTextNode",value:function(e){if(e){if(e.nodeType===3)for(;e.nextSibling&&e.nextSibling.nodeType===3;)e.nodeValue+=e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);else this.normalizeTextNode(e.firstChild);this.normalizeTextNode(e.nextSibling)}}},{key:"markRegExp",value:function(e,r){var t=this;this.opt=r,this.log('Searching with expression "'+e+'"');var n=0,a="wrapMatches",s=function(f){n++,t.opt.each(f)};this.opt.acrossElements&&(a="wrapMatchesAcrossElements"),this[a](e,this.opt.ignoreGroups,function(i,f){return t.opt.filter(f,i,n)},s,function(){n===0&&t.opt.noMatch(e),t.opt.done(n)})}},{key:"mark",value:function(e,r){var t=this;this.opt=r;var n=0,a="wrapMatches",s=this.getSeparatedKeywords(typeof e=="string"?[e]:e),i=s.keywords,f=s.length,p=this.opt.caseSensitive?"":"i",v=function x(b){var S=new RegExp(t.createRegExp(b),"gm"+p),I=0;t.log('Searching with expression "'+S+'"'),t[a](S,1,function(T,oe){return t.opt.filter(oe,b,n,I)},function(T){I++,n++,t.opt.each(T)},function(){I===0&&t.opt.noMatch(b),i[f-1]===b?t.opt.done(n):x(i[i.indexOf(b)+1])})};this.opt.acrossElements&&(a="wrapMatchesAcrossElements"),f===0?this.opt.done(n):v(i[0])}},{key:"markRanges",value:function(e,r){var t=this;this.opt=r;var n=0,a=this.checkRanges(e);a&&a.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(a)),this.wrapRangeFromIndex(a,function(s,i,f,p){return t.opt.filter(s,i,f,p)},function(s,i){n++,t.opt.each(s,i)},function(){t.opt.done(n)})):this.opt.done(n)}},{key:"unmark",value:function(e){var r=this;this.opt=e;var t=this.opt.element?this.opt.element:"*";t+="[data-markjs]",this.opt.className&&(t+="."+this.opt.className),this.log('Removal selector "'+t+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(n){r.unwrapMatches(n)},function(n){var a=m.matches(n,t),s=r.matchesExclude(n);return!a||s?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(e){this._opt=E({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},e)},get:function(){return this._opt}},{key:"iterator",get:function(){return new m(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),d}();function C(d){var l=this,e=new y(d);return this.mark=function(r,t){return e.mark(r,t),l},this.markRegExp=function(r,t){return e.markRegExp(r,t),l},this.markRanges=function(r,t){return e.markRanges(r,t),l},this.unmark=function(r){return e.unmark(r),l},this}return C})}(L)),L.exports}var ge=pe();const ve=he(ge);function V(o){const u=Math.floor(o/3600),c=Math.floor(o%3600/60),h=Math.floor(o%60),g=Math.floor(o%1*100);return`${[u.toString().padStart(2,"0"),c.toString().padStart(2,"0"),h.toString().padStart(2,"0")].join(":")}.${g.toString().padStart(2,"0")}`}const me=o=>({title:o.Title,tags:(o.Tags||[]).map(u=>u.value),collections:(o.Collection||[]).map(u=>u.value),recordingDate:o["Recording Date"],sources:(o.Organization||[]).map(u=>u.value),slug:o.Slug,id:o.ID,videoUrl:o["Video on AWS"],clipName:o["File Name"],sttEngine:(o["Transcription Engine"]||{}).value,audioUrl:o.Audio,original:o["Video Source URL"],swagit_id:o["SwagIt ID"],agenda:o.Agenda,proposal:o.Proposal,presentation:o.Presentation}),ye=(o,u,c)=>c.reduce((h,g)=>({...h,[g[o]]:u(g)}),{}),xe=(o,u)=>Object.values(u).sort(c=>c[o]),ke=xe.bind(void 0,"recordingDate"),Ee=ye.bind(void 0,"ID",me),be=(o,u)=>({...o,...Ee(u)}),Se=async o=>{let c={next:"https://api.baserow.io/api/database/rows/table/546812/?user_field_names=true&size=50",indexed:{}};for(;c.next;)c=await fetch(c.next.replace("http://","https://"),{method:"GET",headers:{"Content-Type":"application/json",Authorization:"Token 5NMJRmuC1OaOsoRmQJFY3K6LM407y0mq"},mode:"cors"}).then(h=>h.json()).then(h=>({next:h.next,indexed:be(c.indexed,h.results)})),o(c.indexed);return c};async function Ie(o,{value:u,refreshing:c}){if(o.id)return await fetch("https://councilwatch.s3.us-east-2.amazonaws.com/transcripts/"+o.id+".json",{mode:"cors"}).then(h=>h.json())}const[we,Ne]=N({}),[Y,_e]=N(0),[Z,Re]=N(0),[F,te]=N(1),[rt,nt]=N(0),[at,it]=N(0),[R,P]=N(0),[$,re]=N(0),[j,z]=N(""),$e=X(()=>ke(we())),ne=X(()=>Object.entries($e().reduce((o,u)=>({...o,...Object.fromEntries(u.collections.map(c=>[c,[...o[c]||[],u]]))}),{})).map(([o,u])=>({playlist:o,videos:u}))),[ae,Te]=N("City Council 2025"),Me=()=>ne().find(o=>o.playlist===ae())?.videos||[],[O,Ce]=N({}),[Oe,ie]=N(0),[Ae,se]=N(0),[J,{mutate:st,refetch:ot}]=le(O,Ie),q=()=>J()&&J().transcript.paragraphs.map((o,u)=>({...o,paragraphIndex:u,words:J().transcript.words.filter(c=>c.start>=o.start&&c.end<=o.end)})),[Q,Le]=N({});function Pe(){ie(0),se(0),te(1),z(""),P(0),re(0)}var Ve=_('<div class="flex items-center"><input class="min-w-80 bg-gray-50 border border-gray-300 text-gray-900 text-xs rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2"type=search placeholder=Search><div> / </div><button data-search=next>&darr;</button><button data-search=prev>&uarr;</button><button data-search=clear>✖');function We(o){let u;return A(()=>(u=new ve(o.transcriptViewer()),q()),null),A(()=>(u?.unmark({done:function(){u.mark(j(),{separateWordSearch:!0,diacritics:!0,exclude:['[role="complementary"]']});const c=document.querySelectorAll("mark");re(c.length),c[R()]?.scrollIntoView({behavior:"smooth"}),c.length===0&&document.querySelector("article")?.scrollTo(0,0)}}),j())),A(()=>{if(!(R()>=$()))return document.querySelectorAll("mark")[R()]?.scrollIntoView({behavior:"smooth"}),R()}),(()=>{var c=Ve(),h=c.firstChild,g=h.nextSibling,E=g.firstChild,m=g.nextSibling,y=m.nextSibling,C=y.nextSibling;return h.$$input=d=>{z(d.target.value)},k(g,(()=>{var d=ce(()=>$()>0);return()=>d()&&R()+1||0})(),E),k(g,$,null),m.$$click=()=>{$()!==0&&R()!==$()-1&&P(R()+1)},y.$$click=()=>{$()!==0&&R()!==0&&P(R()-1)},C.$$click=()=>{z(""),P(0)},M(d=>{var l={"font-mono text-xs inline-block text-nowrap px-2":!0,"text-gray-300":$()===0},e=R()===$()-1||$()===0,r=R()===0||$()===0;return d.e=B(g,l,d.e),e!==d.t&&m.classList.toggle("text-gray-300",d.t=e),r!==d.a&&y.classList.toggle("text-gray-300",d.a=r),d},{e:void 0,t:void 0,a:void 0}),M(()=>h.value=j()),c})()}W(["input","click"]);var De=_('<article class="h-full overflow-y-auto p-4 relative divide-y-2 bg-white border-2 border-slate-300 rounded-lg">'),Fe=_('<section class="flex h-auto static p-2"><div class="h-full sticky top-0 pr-2 w-1/6"role=complementary><p></p><p class="text-xs text-slate-500 font-mono"> - </p></div><p class="h-full w-5/6">'),je=_("<span> ");function Je(o){return w(D,{get children(){return w(U,{get when(){return q()},get children(){var u=De(),c=o.ref;return typeof c=="function"?ee(c,u):o.ref=u,k(u,w(H,{get each(){return q()},children:h=>(()=>{var g=Fe(),E=g.firstChild,m=E.firstChild,y=m.nextSibling,C=y.firstChild,d=E.nextSibling;return k(m,()=>h.speaker),k(y,()=>V(h.start),C),k(y,()=>V(h.end),null),k(d,()=>h.words.map(l=>(()=>{var e=je(),r=e.firstChild;return e.$$dblclick=()=>{Le(l)},k(e,()=>l.text,r),e})())),M(()=>K(d,"data-paragraph-index",h.paragraphIndex)),g})()})),u}})}})}W(["dblclick"]);var ze=_('<ul class="w-full flex flex-col divide-y-2">'),qe=_('<li><a class="p-2 w-full block">');function Be(){const o=(u,c)=>{c.preventDefault(),Ce(u),Pe()};return(()=>{var u=ze();return k(u,w(D,{get children(){return w(H,{get each(){return Me()},children:c=>(()=>{var h=qe(),g=h.firstChild;return ue(g,"click",o.bind(null,c),!0),k(g,()=>c.title),M(E=>{var m={"bg-sky-200 sticky top-0":O().id===c.id,"w-full hover:bg-sky-100 focus:bg-sky-100":!0},y=c.videoUrl;return E.e=B(h,m,E.e),y!==E.t&&K(g,"href",E.t=y),E},{e:void 0,t:void 0}),h})()})}})),u})()}W(["click"]);var Ue=_("<video width=100% height=auto controls plays-inline>"),He=_('<div class="w-full flex justify-between align-middle"><p class="text-xs font-mono content-center"> | </p><form><select class="bg-gray-50 border border-gray-300 text-gray-900 text-xs rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2">'),Ke=_("<option>x");function Ge(){let o;return A(()=>(o.currentTime=Q().start||0,o.play(),Q())),A(()=>(Z()>0&&_e(o.videoHeight),Z())),A(()=>(o.playbackRate=F(),F())),[(()=>{var u=Ue();return ee(c=>{o=c,o.addEventListener("loadeddata",h=>{Re(h.timeStamp),se(o.duration)}),o.addEventListener("timeupdate",h=>{ie(o.currentTime)})},u),M(c=>{var h=!O().id,g=O().videoUrl;return h!==c.e&&u.classList.toggle("hidden",c.e=h),g!==c.t&&K(u,"src",c.t=g),c},{e:void 0,t:void 0}),u})(),w(U,{get when(){return O().id},get children(){var u=He(),c=u.firstChild,h=c.firstChild,g=c.nextSibling,E=g.firstChild;return k(c,()=>V(Oe()),h),k(c,()=>V(Ae()),null),E.addEventListener("change",m=>{te(m.target.value*1)}),k(E,()=>[.5,1,1.5,2,3,4].map(m=>(()=>{var y=Ke(),C=y.firstChild;return y.value=m,k(y,m,C),M(()=>y.selected=F()===m*1),y})())),u}})]}var Ye=_('<div class="flex border-2 border-slate-300 rounded-lg divide-x-2">'),Ze=_("<button>");function Qe(){return w(D,{get children(){var o=Ye();return k(o,w(H,{get each(){return ne()},children:({playlist:u})=>(()=>{var c=Ze();return c.$$click=()=>{Te(u)},k(c,u),M(h=>B(c,{"hover:bg-sky-100 focus:bg-sky-100 w-full py-2":!0,"bg-sky-200":u===ae()},h)),c})()})),o}})}W(["click"]);var Xe=_('<div class="flex justify-between"><h1 class="text-2xl pb-2">'),et=_('<div class="bg-gray-100 text-gray-700 p-8 h-[90vh]"><div class="flex items-center space-x-2 h-full"><div class="h-full w-1/3"><nav class="h-full overflow-y-auto border-2 border-slate-300 rounded-lg transition-[height]"></nav></div><div class="h-full w-2/3">');function lt(){Se(Ne);let o;return(()=>{var u=et(),c=u.firstChild,h=c.firstChild,g=h.firstChild,E=h.nextSibling;return k(u,w(Qe,{}),c),k(h,w(Ge,{}),g),k(g,w(Be,{})),k(E,w(D,{get children(){return w(U,{get when(){return O().title},get children(){var m=Xe(),y=m.firstChild;return k(y,()=>O().title),k(m,w(We,{transcriptViewer:()=>o}),null),m}})}}),null),k(E,w(Je,{ref(m){var y=o;typeof y=="function"?y(m):o=m}}),null),M(m=>fe(g,Y()&&{height:`calc(100vh - ${Y()+60}px)`}||{},m)),u})()}export{lt as default};
